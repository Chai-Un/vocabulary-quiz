const fs = require('fs');
const path = require('path');

// Read the colors.ts file
const colorsFilePath = path.resolve(__dirname, '../src/theme/colors.ts');
const colorsFileContent = fs.readFileSync(colorsFilePath, 'utf8');

// Extract color definitions using regex
const colorRegex = /export const (\w+) = ['"](.+?)['"];/g;
let match;
const colors = [];

while ((match = colorRegex.exec(colorsFileContent)) !== null) {
  colors.push({ name: match[1], value: match[2] });
}

// Generate SCSS content
let scssContent = `/* 
 * This file is auto-generated from ../theme/colors.ts
 * Do not edit this file directly
 */

`;

colors.forEach(color => {
  // Convert camelCase to kebab-case for SCSS
  const scssName = color.name.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g, '$1-$2').toLowerCase();
  scssContent += `$${scssName}: ${color.value};\n`;
});

// Write to _colors.scss
const scssFilePath = path.resolve(__dirname, '../src/styles/_colors.scss');
fs.writeFileSync(scssFilePath, scssContent);

console.log('Generated _colors.scss successfully!');
